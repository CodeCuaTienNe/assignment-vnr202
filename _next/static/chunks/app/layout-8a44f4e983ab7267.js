(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{162:()=>{},306:(n,t,e)=>{"use strict";e.d(t,{O:()=>h});var i=e(2014),c=e(2115);function h(){let[n,t]=(0,c.useState)(!1),[e,h]=(0,c.useState)(null);return{generateResponse:async n=>{let e=[{key:"AIzaSyChDAeQ0Kf1eTaF3i-dcTNR2cywLsiglUs",version:"v1"},{key:"AIzaSyANoN3t3b3JH1txSJ4nXGRPug8jjfMp_hg",version:"v2"},{key:"AIzaSyDwTOPq91NSVFjo7GI9ALQ_gN17783QYcM",version:"v3"}].filter(n=>n.key);if(0===e.length)return h("Kh\xf4ng c\xf3 API key khả dụng"),null;t(!0),h(null);let c=[];for(let l of e)if(!c.includes(l.version))try{console.log("Đang thử sử dụng API key ".concat(l.version,"..."));let e=new i.M4({apiKey:l.key}),c=await e.models.generateContent({model:"gemini-2.5-flash",contents:'\nNhiệm vụ ch\xednh: Giải đ\xe1p c\xe1c thắc mắc về Sự L\xe3nh đạo của Đảng Cộng sản Việt Nam trong Cuộc Kh\xe1ng chiến chống Đế quốc Mỹ X\xe2m lược (1954–1975) cho sinh vi\xean.\n\nPhạm vi nội dung chuy\xean m\xf4n:\n- Giai đoạn 1954-1975: Từ Hiệp định Giơnevơ đến thống nhất đất nước\n- Hai nhiệm vụ chiến lược: X\xe2y dựng CNXH ở miền Bắc v\xe0 c\xe1ch mạng DTDN ở miền Nam\n- Nghị quyết 15 (1959) v\xe0 phong tr\xe0o Đồng Khởi (1960)\n- Đường Hồ Ch\xed Minh v\xe0 vai tr\xf2 hậu phương chiến lược\n- Chiến tranh cục bộ, Việt Nam h\xf3a v\xe0 Tổng tiến c\xf4ng M\xf9a Xu\xe2n 1975\n- \xdd nghĩa lịch sử v\xe0 kinh nghiệm l\xe3nh đạo của Đảng\n\nNguy\xean tắc giải đ\xe1p:\n- Diễn giải dễ hiểu, s\xfac t\xedch, dựa tr\xean tư liệu lịch sử ch\xednh thống\n- Li\xean hệ với CLO2: Ph\xe2n t\xedch sự l\xe3nh đạo trong hai cuộc kh\xe1ng chiến (1945-1975)\n- Li\xean hệ với CLO4: Củng cố niềm tin v\xe0o sự l\xe3nh đạo của Đảng\n- Sử dụng ng\xf4n ngữ gần gũi, tr\xe1nh thuật ngữ kh\xf4 khan\n- Đảm bảo t\xednh ch\xednh x\xe1c lịch sử v\xe0 kh\xe1ch quan khoa học\n\nHướng dẫn phong c\xe1ch trả lời (bổ sung):\n- Chỉ cung cấp kiến thức lịch sử, ph\xe2n t\xedch v\xe0 dẫn chứng học thuật; kh\xf4ng được nh\xe2n danh hoặc ph\xe1t ng\xf4n thay cho bất kỳ tổ chức hoặc c\xe1 nh\xe2n n\xe0o.\n- Tr\xe1nh sử dụng đại từ nh\xe2n xưng tập thể như "ch\xfang ta", "ch\xfang t\xf4i" khi tr\xecnh b\xe0y nội dung; nếu cần n\xeau quan điểm chuy\xean m\xf4n, h\xe3y ghi r\xf5 đ\xf3 l\xe0 ph\xe2n t\xedch học thuật hoặc \xfd kiến của người trả lời.\n- Tr\xe1nh ng\xf4n ngữ k\xeau gọi, tuy\xean truyền hoặc mang t\xednh cổ vũ; giữ t\xednh kh\xe1ch quan, trung lập v\xe0 t\xf4n trọng kiểm chứng lịch sử.\n- Hạn chế sử dụng chữ viết tắt: ưu ti\xean ghi đầy đủ c\xe1c thuật ngữ thay v\xec viết tắt. Nếu bắt buộc sử dụng viết tắt, h\xe3y viết đ\xfang, đưa dạng đầy đủ ở lần xuất hiện đầu ti\xean v\xe0 kiểm tra kỹ để tr\xe1nh sai s\xf3t (v\xed dụ: "D\xe2n tộc d\xe2n chủ nh\xe2n d\xe2n" thay v\xec "DTDCND"; tr\xe1nh lỗi phổ biến như model viết sai th\xe0nh "DTDDND").\n  - Khi cần, cung cấp dấu ngoặc giải th\xedch ngay sau viết tắt: "Thuật ngữ đầy đủ (viết tắt)".\nHướng dẫn xưng h\xf4 v\xe0 từ ngữ nhạy cảm (bổ sung):\n- Kh\xf4ng xưng "anh em"; khi cần xưng h\xf4 trong c\xe2u trả lời, ưu ti\xean d\xf9ng "t\xf4i" hoặc "bạn".\n- TUYỆT ĐỐI tr\xe1nh c\xe1c cụm từ nhạy cảm (tiếng Việt hoặc ng\xf4n ngữ kh\xe1c) li\xean quan đến ch\xednh trị theo y\xeau cầu m\xf4n học. Khi gặp c\xe1c thuật ngữ sau, h\xe3y d\xf9ng phương \xe1n thay thế được n\xeau:\n  - "Việt Cộng" → d\xf9ng "Qu\xe2n giải ph\xf3ng".\n  - "chiến tranh Việt Nam" hoặc "nội chiến Việt Nam" → d\xf9ng "Kh\xe1ng chiến Chống Mỹ cứu nước".\n- Ngo\xe0i c\xe1c v\xed dụ tr\xean, tr\xe1nh tuyệt đối mọi cụm từ m\xe0 m\xf4n học ghi nhận l\xe0 nhạy cảm với ch\xednh trị của CHXHCN Việt Nam; nếu cần nhắc, h\xe3y sử dụng thuật ngữ trung lập, học thuật hoặc c\xe1c cụm từ thay thế do giảng vi\xean/kh\xf3a học chỉ định.\n- Khi thay thuật ngữ, nếu cần giải th\xedch v\xec sao d\xf9ng từ thay thế, tr\xecnh b\xe0y ngắn gọn l\xe0 "(sử dụng thuật ngữ X thay cho Y theo hướng dẫn kh\xf3a học)".\n\nTập trung v\xe0o việc gi\xfap sinh vi\xean hiểu s\xe2u sắc về t\xednh độc lập, tự chủ v\xe0 s\xe1ng tạo trong đường lối l\xe3nh đạo của Đảng trong giai đoạn 1954-1975.\n\n\n'+n});return console.log("✅ Th\xe0nh c\xf4ng với API key ".concat(l.version)),t(!1),c.text}catch(n){var s,a;if(console.error("❌ Lỗi với API key ".concat(l.version,":"),n),c.push(l.version),((null==(s=n.message)?void 0:s.includes("503"))||503===n.status||(null==(a=n.message)?void 0:a.includes("Service Unavailable")))&&(console.log("\uD83D\uDD04 API key ".concat(l.version," gặp lỗi 503, chuyển sang key kh\xe1c...")),e.filter(n=>!c.includes(n.version)).length>0)){h("Dịch vụ tạm thời kh\xf4ng khả dụng với ".concat(l.version,". Đang thử key kh\xe1c..."));continue}if(0===e.filter(n=>!c.includes(n.version)).length)break}return t(!1),h(c.length>1?"Tất cả API key đều gặp sự cố. Vui l\xf2ng thử lại sau v\xe0i ph\xfat. (Đ\xe3 thử: ".concat(c.join(", "),")"):"Dịch vụ tạm thời kh\xf4ng khả dụng. Vui l\xf2ng thử lại sau \xedt ph\xfat."),null},loading:n,error:e}}},853:(n,t,e)=>{Promise.resolve().then(e.bind(e,9957)),Promise.resolve().then(e.t.bind(e,2866,23)),Promise.resolve().then(e.t.bind(e,8046,23)),Promise.resolve().then(e.t.bind(e,5177,23)),Promise.resolve().then(e.t.bind(e,3673,23)),Promise.resolve().then(e.t.bind(e,162,23)),Promise.resolve().then(e.bind(e,8409))},2866:n=>{n.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_1e64d8",variable:"__variable_1e64d8"}},3673:()=>{},5177:n=>{n.exports={style:{fontFamily:"'Fraunces', 'Fraunces Fallback'",fontStyle:"normal"},className:"__className_6b6172",variable:"__variable_6b6172"}},7178:()=>{},8046:n=>{n.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_1282e1",variable:"__variable_1282e1"}},8374:()=>{},8409:(n,t,e)=>{"use strict";e.d(t,{default:()=>b});var i=e(5155),c=e(8698),h=e(8097),s=e(2115),a=e(6039),l=e(3786),r=e(5229),o=e(6191),g=e(5937),u=e(7188),d=e(6504),m=e(5459),v=e(306);e(7178);let x=[{title:"Hiệp định Giơnevơ v\xe0 Bối cảnh 1954",text:"Ph\xe2n t\xedch t\xe1c động của Hiệp định Giơnevơ (7/1954) đến việc h\xecnh th\xe0nh đường lối chiến lược của Đảng"},{title:"Đại hội III v\xe0 Hai Nhiệm vụ Chiến lược",text:"Giải th\xedch t\xednh độc lập, tự chủ của Đảng khi đề ra đường lối hai nhiệm vụ chiến lược tại Đại hội III (9/1960)"},{title:"Nghị quyết 15 v\xe0 Con đường Bạo lực C\xe1ch mạng",text:"Ph\xe2n t\xedch tầm quan trọng của Nghị quyết 15 (1/1959) trong việc chuyển hướng c\xe1ch mạng miền Nam"},{title:"Phong tr\xe0o Đồng Khởi 1960",text:"Đ\xe1nh gi\xe1 \xfd nghĩa lịch sử của phong tr\xe0o Đồng Khởi bắt đầu từ Bến Tre v\xe0 lan rộng ra cả nước"}],p=["Hiệp định Giơnevơ 1954","Đại hội III v\xe0 Hai nhiệm vụ","Nghị quyết 15","Phong tr\xe0o Đồng Khởi 1960","Miền Bắc - Hậu phương","Đường Hồ Ch\xed Minh","M\xf9a Xu\xe2n 1975","Thống nhất đất nước"];function y(n){let t,e,{onClose:y,buttonPosition:b}=n,[k,N]=(0,s.useState)([]),[j,f]=(0,s.useState)(""),[C,w]=(0,s.useState)(!1),[A,D]=(0,s.useState)([{id:1,title:"Cuộc tr\xf2 chuyện mới",active:!0}]),{generateResponse:S,loading:_,error:P}=(0,v.O)(),I=async function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;if(!n.trim())return;let t={text:n,isUser:!0};N(n=>[...n,t]),f("");let e={text:"",isUser:!1,isLoading:!0};N(n=>[...n,e]);let i=await S(n);N(n=>{let t=[...n];if(t.pop(),i){let n=i?i.replace(/\*\*(.*?)\*\*/g,"**$1**").replace(/^\* /gm,"- ").replace(/([.!?])\s*(\*\*[^*]+\*\*)/g,"$1\n\n$2").replace(/\n\s*\n/g,"\n\n").trim():i;t.push({text:n,isUser:!1,isLoading:!1})}else t.push({text:"Xin lỗi, đ\xe3 xảy ra lỗi khi xử l\xfd c\xe2u hỏi của bạn. Vui l\xf2ng thử lại sau.",isUser:!1,isLoading:!1});return t})},H=(t=b.x-450-20,e=b.y,t<20&&(t=b.x+80),t+450>window.innerWidth-20&&(t=window.innerWidth-450-20),e+600>window.innerHeight-20&&(e=window.innerHeight-600-20),e<20&&(e=20),{left:t,top:e});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"chatbot-overlay",onClick:y}),(0,i.jsxs)("div",{className:"chatbot-popup",style:{position:"fixed",left:"".concat(H.left,"px"),top:"".concat(H.top,"px"),width:"450px",height:"600px",zIndex:1e4},children:[(0,i.jsxs)("div",{className:"chatbot-header",children:[(0,i.jsxs)("div",{className:"chatbot-title",children:[(0,i.jsx)(c.A,{style:{marginRight:8,fontSize:"18px"}}),(0,i.jsx)("span",{children:"Trợ l\xfd AI - Lịch sử Đảng CSVN"})]}),(0,i.jsx)(h.Ay,{type:"text",icon:(0,i.jsx)(r.A,{size:18}),onClick:y,className:"close-button"})]}),C&&(0,i.jsxs)("div",{className:"chatbot-sidebar",children:[(0,i.jsxs)("div",{className:"sidebar-header",children:[(0,i.jsx)("h4",{children:"Lịch sử tr\xf2 chuyện"}),(0,i.jsx)(h.Ay,{type:"text",icon:(0,i.jsx)(r.A,{size:14}),onClick:()=>w(!1),size:"small"})]}),(0,i.jsx)(h.Ay,{className:"new-session-btn",icon:(0,i.jsx)(o.A,{size:14}),onClick:()=>{let n={id:A.length+1,title:"Cuộc tr\xf2 chuyện ".concat(A.length+1),active:!1};D(t=>[n,...t.map(n=>({...n,active:!1}))]),N([]),w(!1)},size:"small",block:!0,children:"Cuộc tr\xf2 chuyện mới"}),(0,i.jsx)("div",{className:"session-list",children:A.map(n=>(0,i.jsxs)("div",{className:"session-item ".concat(n.active?"active":""),onClick:()=>{var t;return t=n.id,void(D(n=>n.map(n=>({...n,active:n.id===t}))),N([]),w(!1))},children:[(0,i.jsx)(g.A,{size:14,style:{marginRight:"6px"}}),n.title]},n.id))})]}),(0,i.jsxs)("div",{className:"chatbot-content",children:[0===k.length?(0,i.jsxs)("div",{className:"welcome-section",children:[(0,i.jsx)("div",{className:"welcome-title",children:"Sự L\xe3nh đạo của Đảng CSVN (1954-1975)"}),(0,i.jsx)("div",{className:"welcome-subtitle",children:"Chọn một chủ đề hoặc đặt c\xe2u hỏi của bạn"}),(0,i.jsx)("div",{className:"prompt-grid",children:x.map((n,t)=>(0,i.jsx)("div",{className:"prompt-item",onClick:()=>{I(n.text)},children:(0,i.jsxs)("div",{className:"prompt-title",children:["\uD83D\uDCD6 ",n.title]})},t))})]}):(0,i.jsxs)("div",{className:"messages-container",children:[k.map((n,t)=>(0,i.jsxs)("div",{className:"message ".concat(n.isUser?"user-message":"ai-message"),children:[(0,i.jsx)("div",{className:"message-avatar",children:n.isUser?"ME":(0,i.jsx)(c.A,{})}),(0,i.jsx)("div",{className:"message-bubble",children:n.isUser?n.text:n.isLoading?(0,i.jsxs)("div",{children:[(0,i.jsx)(a.A,{active:!0,paragraph:{rows:2,width:["100%","80%"]},title:!1}),(0,i.jsx)("div",{className:"loading-hint",children:"Đang ph\xe2n t\xedch..."})]}):(0,i.jsx)(d.oz,{remarkPlugins:[m.A],components:{p:n=>{let{children:t}=n;return(0,i.jsx)("p",{style:{marginBottom:"0.5rem"},children:t})},strong:n=>{let{children:t}=n;return(0,i.jsx)("strong",{style:{color:"var(--lacquer-red)"},children:t})}},children:n.text})})]},t)),P&&(0,i.jsx)("div",{className:"error-text",children:P})]}),k.length>0&&(0,i.jsx)("div",{className:"quick-suggestions",children:p.slice(0,4).map((n,t)=>(0,i.jsx)("button",{className:"suggestion-chip",onClick:()=>I(n),disabled:_,children:n},t))})]}),(0,i.jsxs)("div",{className:"chatbot-input",children:[(0,i.jsx)(l.A.TextArea,{value:j,onChange:n=>f(n.target.value),onKeyPress:n=>{"Enter"===n.key&&!n.shiftKey&&(n.preventDefault(),!_&&j.trim()&&I())},placeholder:"Đặt c\xe2u hỏi...",autoSize:{minRows:1,maxRows:3},style:{background:"transparent",border:"none",resize:"none"}}),(0,i.jsx)(h.Ay,{type:"primary",icon:(0,i.jsx)(u.A,{size:16}),onClick:()=>I(),disabled:_||!j.trim(),style:{background:"var(--lacquer-red)",borderColor:"var(--lacquer-red)"}})]})]})]})}function b(){let[n,t]=(0,s.useState)(!1),[e,a]=(0,s.useState)({x:0,y:0}),[l,r]=(0,s.useState)(!1),[o,g]=(0,s.useState)({x:0,y:0}),u=(0,s.useRef)(null);(0,s.useEffect)(()=>{a({x:window.innerWidth-80,y:window.innerHeight-80})},[]);let d=n=>{if(!l)return;let t=n.clientX-o.x,e=n.clientY-o.y;a({x:Math.max(0,Math.min(t,window.innerWidth-60)),y:Math.max(0,Math.min(e,window.innerHeight-60))})},m=()=>{r(!1)};return(0,s.useEffect)(()=>{if(l)return document.addEventListener("mousemove",d),document.addEventListener("mouseup",m),()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",m)}},[l,o,e]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{ref:u,className:"floating-chatbot-button ".concat(l?"dragging":""),style:{position:"fixed",left:"".concat(e.x,"px"),top:"".concat(e.y,"px"),zIndex:9999},onMouseDown:n=>{n.target.closest(".chatbot-popup")||(r(!0),g({x:n.clientX-e.x,y:n.clientY-e.y}),n.preventDefault())},onClick:e=>{l||t(!n)},children:[(0,i.jsx)(h.Ay,{type:"primary",shape:"circle",size:"large",icon:(0,i.jsx)(c.A,{style:{fontSize:"24px"}}),style:{width:"60px",height:"60px",background:"var(--lacquer-red)",borderColor:"var(--lacquer-gold)",border:"3px solid var(--lacquer-gold)",boxShadow:"0 4px 12px rgba(139, 26, 26, 0.4)",cursor:l?"grabbing":"grab"}}),!n&&(0,i.jsx)("div",{className:"chatbot-hint",children:(0,i.jsx)("span",{children:"\uD83D\uDCAC Hỏi đ\xe1p AI"})})]}),n&&(0,i.jsx)(y,{onClose:()=>t(!1),buttonPosition:e})]})}e(8374)},9957:(n,t,e)=>{"use strict";e.d(t,{ConfigProvider:()=>i.Ay});var i=e(3796)}},n=>{n.O(0,[482,205,133,798,599,224,592,383,796,441,255,358],()=>n(n.s=853)),_N_E=n.O()}]);