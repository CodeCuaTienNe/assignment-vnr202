(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{162:()=>{},306:(e,n,i)=>{"use strict";i.d(n,{O:()=>c});var t=i(2014),s=i(2115);function c(){let[e,n]=(0,s.useState)(!1),[i,c]=(0,s.useState)(null);return{generateResponse:async e=>{let i=[{key:"AIzaSyChDAeQ0Kf1eTaF3i-dcTNR2cywLsiglUs",version:"v1"},{key:"AIzaSyANoN3t3b3JH1txSJ4nXGRPug8jjfMp_hg",version:"v2"},{key:"AIzaSyDwTOPq91NSVFjo7GI9ALQ_gN17783QYcM",version:"v3"}].filter(e=>e.key);if(0===i.length)return c("Kh\xf4ng c\xf3 API key khả dụng"),null;n(!0),c(null);let s=[];for(let r of i)if(!s.includes(r.version))try{console.log("Đang thử sử dụng API key ".concat(r.version,"..."));let i=new t.M4({apiKey:r.key}),s=await i.models.generateContent({model:"gemini-2.5-flash",contents:"\nNhiệm vụ ch\xednh: Giải đ\xe1p c\xe1c thắc mắc về Sự L\xe3nh đạo của Đảng Cộng sản Việt Nam trong Cuộc Kh\xe1ng chiến chống Đế quốc Mỹ X\xe2m lược (1954–1975) cho sinh vi\xean.\n\nPhạm vi nội dung chuy\xean m\xf4n:\n- Giai đoạn 1954-1975: Từ Hiệp định Giơnevơ đến thống nhất đất nước\n- Hai nhiệm vụ chiến lược: X\xe2y dựng CNXH ở miền Bắc v\xe0 c\xe1ch mạng DTDN ở miền Nam\n- Nghị quyết 15 (1959) v\xe0 phong tr\xe0o Đồng Khởi (1960)\n- Đường Hồ Ch\xed Minh v\xe0 vai tr\xf2 hậu phương chiến lược\n- Chiến tranh cục bộ, Việt Nam h\xf3a v\xe0 Tổng tiến c\xf4ng M\xf9a Xu\xe2n 1975\n- \xdd nghĩa lịch sử v\xe0 kinh nghiệm l\xe3nh đạo của Đảng\n\nNguy\xean tắc giải đ\xe1p:\n- Diễn giải dễ hiểu, s\xfac t\xedch, dựa tr\xean tư liệu lịch sử ch\xednh thống\n- Li\xean hệ với CLO2: Ph\xe2n t\xedch sự l\xe3nh đạo trong hai cuộc kh\xe1ng chiến (1945-1975)\n- Li\xean hệ với CLO4: Củng cố niềm tin v\xe0o sự l\xe3nh đạo của Đảng\n- Sử dụng ng\xf4n ngữ gần gũi, tr\xe1nh thuật ngữ kh\xf4 khan\n- Đảm bảo t\xednh ch\xednh x\xe1c lịch sử v\xe0 kh\xe1ch quan khoa học\n\nTập trung v\xe0o việc gi\xfap sinh vi\xean hiểu s\xe2u sắc về t\xednh độc lập, tự chủ v\xe0 s\xe1ng tạo trong đường lối l\xe3nh đạo của Đảng trong giai đoạn 1954-1975.\n\n\n"+e});return console.log("✅ Th\xe0nh c\xf4ng với API key ".concat(r.version)),n(!1),s.text}catch(e){var a,l;if(console.error("❌ Lỗi với API key ".concat(r.version,":"),e),s.push(r.version),((null==(a=e.message)?void 0:a.includes("503"))||503===e.status||(null==(l=e.message)?void 0:l.includes("Service Unavailable")))&&(console.log("\uD83D\uDD04 API key ".concat(r.version," gặp lỗi 503, chuyển sang key kh\xe1c...")),i.filter(e=>!s.includes(e.version)).length>0)){c("Dịch vụ tạm thời kh\xf4ng khả dụng với ".concat(r.version,". Đang thử key kh\xe1c..."));continue}if(0===i.filter(e=>!s.includes(e.version)).length)break}return n(!1),c(s.length>1?"Tất cả API key đều gặp sự cố. Vui l\xf2ng thử lại sau v\xe0i ph\xfat. (Đ\xe3 thử: ".concat(s.join(", "),")"):"Dịch vụ tạm thời kh\xf4ng khả dụng. Vui l\xf2ng thử lại sau \xedt ph\xfat."),null},loading:e,error:i}}},853:(e,n,i)=>{Promise.resolve().then(i.bind(i,9957)),Promise.resolve().then(i.t.bind(i,2866,23)),Promise.resolve().then(i.t.bind(i,8046,23)),Promise.resolve().then(i.t.bind(i,5177,23)),Promise.resolve().then(i.t.bind(i,3673,23)),Promise.resolve().then(i.t.bind(i,162,23)),Promise.resolve().then(i.bind(i,8409))},2866:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_1e64d8",variable:"__variable_1e64d8"}},3673:()=>{},5177:e=>{e.exports={style:{fontFamily:"'Fraunces', 'Fraunces Fallback'",fontStyle:"normal"},className:"__className_6b6172",variable:"__variable_6b6172"}},7178:()=>{},8046:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_1282e1",variable:"__variable_1282e1"}},8374:()=>{},8409:(e,n,i)=>{"use strict";i.d(n,{default:()=>b});var t=i(5155),s=i(8698),c=i(8097),a=i(2115),l=i(6039),r=i(9637),h=i(5229),o=i(6191),g=i(5937),d=i(7188),u=i(6504),m=i(5459),v=i(306);i(7178);let x=[{title:"Hiệp định Giơnevơ v\xe0 Bối cảnh 1954",text:"Ph\xe2n t\xedch t\xe1c động của Hiệp định Giơnevơ (7/1954) đến việc h\xecnh th\xe0nh đường lối chiến lược của Đảng"},{title:"Đại hội III v\xe0 Hai Nhiệm vụ Chiến lược",text:"Giải th\xedch t\xednh độc lập, tự chủ của Đảng khi đề ra đường lối hai nhiệm vụ chiến lược tại Đại hội III (9/1960)"},{title:"Nghị quyết 15 v\xe0 Con đường Bạo lực C\xe1ch mạng",text:"Ph\xe2n t\xedch tầm quan trọng của Nghị quyết 15 (1/1959) trong việc chuyển hướng c\xe1ch mạng miền Nam"},{title:"Phong tr\xe0o Đồng Khởi 1960",text:"Đ\xe1nh gi\xe1 \xfd nghĩa lịch sử của phong tr\xe0o Đồng Khởi bắt đầu từ Bến Tre v\xe0 lan rộng ra cả nước"}],p=["Hiệp định Giơnevơ 1954","Đại hội III v\xe0 Hai nhiệm vụ","Nghị quyết 15","Phong tr\xe0o Đồng Khởi 1960","Miền Bắc - Hậu phương","Đường Hồ Ch\xed Minh","M\xf9a Xu\xe2n 1975","Thống nhất đất nước"];function y(e){let n,i,{onClose:y,buttonPosition:b}=e,[N,j]=(0,a.useState)([]),[k,f]=(0,a.useState)(""),[C,w]=(0,a.useState)(!1),[A,S]=(0,a.useState)([{id:1,title:"Cuộc tr\xf2 chuyện mới",active:!0}]),{generateResponse:_,loading:P,error:I}=(0,v.O)(),D=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k;if(!e.trim())return;let n={text:e,isUser:!0};j(e=>[...e,n]),f("");let i={text:"",isUser:!1,isLoading:!0};j(e=>[...e,i]);let t=await _(e);j(e=>{let n=[...e];if(n.pop(),t){let e=t?t.replace(/\*\*(.*?)\*\*/g,"**$1**").replace(/^\* /gm,"- ").replace(/([.!?])\s*(\*\*[^*]+\*\*)/g,"$1\n\n$2").replace(/\n\s*\n/g,"\n\n").trim():t;n.push({text:e,isUser:!1,isLoading:!1})}else n.push({text:"Xin lỗi, đ\xe3 xảy ra lỗi khi xử l\xfd c\xe2u hỏi của bạn. Vui l\xf2ng thử lại sau.",isUser:!1,isLoading:!1});return n})},L=(n=b.x-450-20,i=b.y,n<20&&(n=b.x+80),n+450>window.innerWidth-20&&(n=window.innerWidth-450-20),i+600>window.innerHeight-20&&(i=window.innerHeight-600-20),i<20&&(i=20),{left:n,top:i});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"chatbot-overlay",onClick:y}),(0,t.jsxs)("div",{className:"chatbot-popup",style:{position:"fixed",left:"".concat(L.left,"px"),top:"".concat(L.top,"px"),width:"450px",height:"600px",zIndex:1e4},children:[(0,t.jsxs)("div",{className:"chatbot-header",children:[(0,t.jsxs)("div",{className:"chatbot-title",children:[(0,t.jsx)(s.A,{style:{marginRight:8,fontSize:"18px"}}),(0,t.jsx)("span",{children:"Trợ l\xfd AI - Lịch sử Đảng CSVN"})]}),(0,t.jsx)(c.Ay,{type:"text",icon:(0,t.jsx)(h.A,{size:18}),onClick:y,className:"close-button"})]}),C&&(0,t.jsxs)("div",{className:"chatbot-sidebar",children:[(0,t.jsxs)("div",{className:"sidebar-header",children:[(0,t.jsx)("h4",{children:"Lịch sử tr\xf2 chuyện"}),(0,t.jsx)(c.Ay,{type:"text",icon:(0,t.jsx)(h.A,{size:14}),onClick:()=>w(!1),size:"small"})]}),(0,t.jsx)(c.Ay,{className:"new-session-btn",icon:(0,t.jsx)(o.A,{size:14}),onClick:()=>{let e={id:A.length+1,title:"Cuộc tr\xf2 chuyện ".concat(A.length+1),active:!1};S(n=>[e,...n.map(e=>({...e,active:!1}))]),j([]),w(!1)},size:"small",block:!0,children:"Cuộc tr\xf2 chuyện mới"}),(0,t.jsx)("div",{className:"session-list",children:A.map(e=>(0,t.jsxs)("div",{className:"session-item ".concat(e.active?"active":""),onClick:()=>{var n;return n=e.id,void(S(e=>e.map(e=>({...e,active:e.id===n}))),j([]),w(!1))},children:[(0,t.jsx)(g.A,{size:14,style:{marginRight:"6px"}}),e.title]},e.id))})]}),(0,t.jsxs)("div",{className:"chatbot-content",children:[0===N.length?(0,t.jsxs)("div",{className:"welcome-section",children:[(0,t.jsx)("div",{className:"welcome-title",children:"Sự L\xe3nh đạo của Đảng CSVN (1954-1975)"}),(0,t.jsx)("div",{className:"welcome-subtitle",children:"Chọn một chủ đề hoặc đặt c\xe2u hỏi của bạn"}),(0,t.jsx)("div",{className:"prompt-grid",children:x.map((e,n)=>(0,t.jsx)("div",{className:"prompt-item",onClick:()=>{D(e.text)},children:(0,t.jsxs)("div",{className:"prompt-title",children:["\uD83D\uDCD6 ",e.title]})},n))})]}):(0,t.jsxs)("div",{className:"messages-container",children:[N.map((e,n)=>(0,t.jsxs)("div",{className:"message ".concat(e.isUser?"user-message":"ai-message"),children:[(0,t.jsx)("div",{className:"message-avatar",children:e.isUser?"ME":(0,t.jsx)(s.A,{})}),(0,t.jsx)("div",{className:"message-bubble",children:e.isUser?e.text:e.isLoading?(0,t.jsxs)("div",{children:[(0,t.jsx)(l.A,{active:!0,paragraph:{rows:2,width:["100%","80%"]},title:!1}),(0,t.jsx)("div",{className:"loading-hint",children:"Đang ph\xe2n t\xedch..."})]}):(0,t.jsx)(u.oz,{remarkPlugins:[m.A],components:{p:e=>{let{children:n}=e;return(0,t.jsx)("p",{style:{marginBottom:"0.5rem"},children:n})},strong:e=>{let{children:n}=e;return(0,t.jsx)("strong",{style:{color:"var(--lacquer-red)"},children:n})}},children:e.text})})]},n)),I&&(0,t.jsx)("div",{className:"error-text",children:I})]}),N.length>0&&(0,t.jsx)("div",{className:"quick-suggestions",children:p.slice(0,4).map((e,n)=>(0,t.jsx)("button",{className:"suggestion-chip",onClick:()=>D(e),disabled:P,children:e},n))})]}),(0,t.jsxs)("div",{className:"chatbot-input",children:[(0,t.jsx)(r.A.TextArea,{value:k,onChange:e=>f(e.target.value),onKeyPress:e=>{"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),!P&&k.trim()&&D())},placeholder:"Đặt c\xe2u hỏi...",autoSize:{minRows:1,maxRows:3},style:{background:"transparent",border:"none",resize:"none"}}),(0,t.jsx)(c.Ay,{type:"primary",icon:(0,t.jsx)(d.A,{size:16}),onClick:()=>D(),disabled:P||!k.trim(),style:{background:"var(--lacquer-red)",borderColor:"var(--lacquer-red)"}})]})]})]})}function b(){let[e,n]=(0,a.useState)(!1),[i,l]=(0,a.useState)({x:0,y:0}),[r,h]=(0,a.useState)(!1),[o,g]=(0,a.useState)({x:0,y:0}),d=(0,a.useRef)(null);(0,a.useEffect)(()=>{l({x:window.innerWidth-80,y:window.innerHeight-80})},[]);let u=e=>{if(!r)return;let n=e.clientX-o.x,i=e.clientY-o.y;l({x:Math.max(0,Math.min(n,window.innerWidth-60)),y:Math.max(0,Math.min(i,window.innerHeight-60))})},m=()=>{h(!1)};return(0,a.useEffect)(()=>{if(r)return document.addEventListener("mousemove",u),document.addEventListener("mouseup",m),()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",m)}},[r,o,i]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{ref:d,className:"floating-chatbot-button ".concat(r?"dragging":""),style:{position:"fixed",left:"".concat(i.x,"px"),top:"".concat(i.y,"px"),zIndex:9999},onMouseDown:e=>{e.target.closest(".chatbot-popup")||(h(!0),g({x:e.clientX-i.x,y:e.clientY-i.y}),e.preventDefault())},onClick:i=>{r||n(!e)},children:[(0,t.jsx)(c.Ay,{type:"primary",shape:"circle",size:"large",icon:(0,t.jsx)(s.A,{style:{fontSize:"24px"}}),style:{width:"60px",height:"60px",background:"var(--lacquer-red)",borderColor:"var(--lacquer-gold)",border:"3px solid var(--lacquer-gold)",boxShadow:"0 4px 12px rgba(139, 26, 26, 0.4)",cursor:r?"grabbing":"grab"}}),!e&&(0,t.jsx)("div",{className:"chatbot-hint",children:(0,t.jsx)("span",{children:"\uD83D\uDCAC Hỏi đ\xe1p AI"})})]}),e&&(0,t.jsx)(y,{onClose:()=>n(!1),buttonPosition:i})]})}i(8374)},9957:(e,n,i)=>{"use strict";i.d(n,{ConfigProvider:()=>t.Ay});var t=i(3796)}},e=>{e.O(0,[482,205,133,798,224,592,587,796,441,255,358],()=>e(e.s=853)),_N_E=e.O()}]);